<div class="login-root" [style.--login-bg-url]="'url(' + loginBackgroundUrl + ')'">
  <!-- Fondo con imagen + velo -->
  <div class="hero" aria-hidden="true"></div>

  <div class="login-container">
    <!-- Marca -->
    <div class="brand">
      <div class="brand-mark" aria-hidden="true">
        <svg width="28" height="28" viewBox="0 0 24 24" role="img" focusable="false" aria-hidden="true">
          <defs>
            <linearGradient id="lg" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#2563eb"/>
              <stop offset="100%" stop-color="#0ea5b6"/>
            </linearGradient>
          </defs>
          <path fill="url(#lg)" d="M12 2a10 10 0 100 20 10 10 0 000-20Zm1 5a1 1 0 011 1v2h2a1 1 0 110 2h-2v2a1 1 0 11-2 0v-2H9a1 1 0 110-2h2V8a1 1 0 011-1Z"/>
        </svg>
      </div>
      <div class="brand-copy">
        <h1>MunayBol</h1>
        <p>Bienvenido de nuevo</p>
      </div>
    </div>

    <!-- Card fijo -->
    <div class="login-card">
      <div class="card-header">
        <h4 class="card-title">Iniciar Sesión</h4>
        <p class="card-description">Accede a tu cuenta para reservar y gestionar tus viajes en Bolivia</p>
      </div>

      <form (ngSubmit)="login()" autocomplete="off" [class.loading]="loading" novalidate>
        <!-- Correo -->
        <div class="form-group field">
          <label for="correo">Correo</label>
          <div class="control with-icon">
            <span class="icon" aria-hidden="true">
              <svg width="18" height="18" viewBox="0 0 24 24" focusable="false"><path fill="currentColor" d="M20 4H4a2 2 0 00-2 2v12a2 2 0 002 2h16a2 2 0 002-2V6a2 2 0 00-2-2Zm0 4-8 5L4 8V6l8 5 8-5v2Z"/></svg>
            </span>
            <input #emailInput id="correo" name="correo" [(ngModel)]="correo" required (keydown)="onKeyDownEnter($event)" placeholder="tu@email.com" />
          </div>
        </div>

        <!-- Contraseña -->
        <div class="form-group field">
          <label for="contrasenia">Contraseña</label>
          <div class="control with-icon">
            <span class="icon" aria-hidden="true">
              <svg width="18" height="18" viewBox="0 0 24 24" focusable="false"><path fill="currentColor" d="M12 1a5 5 0 00-5 5v3H6a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2v-8a2 2 0 00-2-2h-1V6a5 5 0 00-5-5Zm0 2a3 3 0 013 3v3H9V6a3 3 0 013-3Z"/></svg>
            </span>
            <input #passwordInput id="contrasenia" name="contrasenia" [type]="passwordType" [(ngModel)]="contrasenia" required (keydown)="onKeyDownEnter($event)" placeholder="••••••••" />
            <button type="button" class="toggle" (click)="togglePassword()" [attr.aria-label]="passwordVisible ? 'Ocultar contraseña' : 'Mostrar contraseña'">
              <svg *ngIf="!passwordVisible" width="18" height="18" viewBox="0 0 24 24"><path fill="currentColor" d="M12 5c-7 0-10 7-10 7s3 7 10 7 10-7 10-7-3-7-10-7Zm0 12a5 5 0 1 1 .001-10.001A5 5 0 0 1 12 17Z"/></svg>
              <svg *ngIf="passwordVisible" width="18" height="18" viewBox="0 0 24 24"><path fill="currentColor" d="M3 3l18 18-1.41 1.41-2.26-2.26C15.83 21.08 13.98 21.9 12 22c-7 0-10-7-10-7a18.7 18.7 0 0 1 6.08-6.74L1.59 4.41 3 3Zm8.96 3c6.45.11 9.99 6.99 9.99 6.99s-.8 1.84-2.39 3.58L14.4 11.8a3.5 3.5 0 0 0-4.6-4.6L9.88 6.1c.68-.07 1.34-.1 2.08-.1Z"/></svg>
            </button>
          </div>
        </div>

        <!-- Error -->
        <div class="error" *ngIf="error">{{ error }}</div>

        <!-- Botón Enviar centrado -->
        <div class="btn-row">
          <button class="submit-btn" type="submit" [disabled]="loading">
            <span class="btn-content" [class.hidden]="loading">INGRESAR</span>
            <span class="btn-spinner" *ngIf="loading" aria-hidden="true"></span>
          </button>
        </div>
      </form>

      <!-- Divider -->
      <div class="divider">
        <span>o continúa con</span>
      </div>

      <!-- Fila de iconos OAuth -->
      <div class="oauth-icons">
        <!-- Google oficial, icon-only -->
        <div id="googleButton" class="oauth-host icon-only" [class.loading]="!googleReady">
          <div class="oauth-skel" *ngIf="!googleReady"></div>
        </div>

        <!-- GitHub icon-only -->
        <button type="button" (click)="loginWithGitHub()" class="oauth-icon github" [disabled]="loading || githubLoading" [class.loading]="githubLoading" aria-label="Continuar con GitHub">
          <svg viewBox="0 0 16 16" aria-hidden="true" focusable="false">
            <path fill="currentColor" fill-rule="evenodd" d="M8 0C3.58 0 0 3.69 0 8.24c0 3.64 2.29 6.72 5.47 7.81.4.08.55-.18.55-.39 0-.19-.01-.82-.01-1.49-2.01.38-2.53-.51-2.69-.98-.09-.24-.48-.98-.82-1.18-.28-.15-.68-.52-.01-.53.63-.01 1.08.59 1.23.83.72 1.23 1.87.88 2.33.67.07-.53.28-.88.51-1.09-1.78-.2-3.64-.91-3.64-4.06 0-.9.31-1.63.82-2.2-.08-.2-.36-1.01.08-2.1 0 0 .67-.22 2.2.84.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.06 2.2-.84 2.2-.84.44 1.09.16 1.9.08 2.1.51.57.82 1.3.82 2.2 0 3.16-1.87 3.86-3.65 4.06.29.26.54.77.54 1.56 0 1.12-.01 2.02-.01 2.3 0 .21.15.47.55.39A8.24 8.24 0 0016 8.24C16 3.69 12.42 0 8 0z"/>
          </svg>
          <span class="spinner" *ngIf="githubLoading" aria-hidden="true"></span>
        </button>
      </div>

      <!-- Footer compacto con CTA Registrarse (sin líneas diagonales) -->
      <div class="auth-links-container compact">
        <a class="forgot-password-link" routerLink="/recuperar-contrasenia">¿Olvidaste tu contraseña?</a>
        <div class="signup-prompt">
          ¿No tienes cuenta?
          <a class="signup-link cta" routerLink="/registrarse" aria-label="Ir a Registrarse">Registrarse</a>
        </div>
      </div>
    </div>

    <!-- Overlay loading (bloquea UI) -->
    <div class="overlay" *ngIf="loading">
      <div class="loader">
        <span class="dot"></span><span class="dot"></span><span class="dot"></span>
      </div>
    </div>
  </div>
</div>
