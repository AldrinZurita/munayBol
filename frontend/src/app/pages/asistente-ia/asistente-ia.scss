:root {
  --bg: #8f8c8c;
  --card: #ffffff;
  --card-2: #ffffff;
  --border: #e5e7eb;
  --text: #0f172a;
  --text-2: #1f2937;
  --text-3: #64748b;
  --brand: #3b82f6;
  --brand-2: #2563eb;
  --brand-3: #0ea5e9;
  --brand-gradient: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
  --shadow-1: 0 2px 10px rgba(0,0,0,.06);
  --shadow-2: 0 4px 16px rgba(0,0,0,.08);
  --r-lg: 16px;
  --r-md: 12px;
  --r-sm: 10px;
  --pill: 999px;
  --send-size-h: 48px;
  --send-size-w: 48px;
  --bubble-radius: 14px;
}

:host, .asistente-root {
  min-height: 100vh;
  color: var(--text);
  background: var(--bg);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  line-height: 1.5;
}

.bg.fx, .bg.fx-b { display: none !important; }
.asistente-container {
  position: relative; z-index: 1; margin: 0 auto;
  max-width: 1240px;
  width: 100%;
  padding: 24px 16px;
  display: grid; grid-template-rows: auto auto 1fr auto auto; gap: 12px;
}

.header {
  display: grid;
  grid-template-columns: auto 1fr auto;
  align-items: center;
  gap: 12px;
  background: #ffffff;
  border: 1px solid var(--border);
  border-radius: var(--r-lg);
  padding: 14px 16px;
  box-shadow: var(--shadow-1);
  position: relative;
}
.header::before { display: none; }
.header .logo {
  width: 48px; height: 48px; border-radius: 12px;
  display: grid; place-items: center; font-size: 22px;
  background: var(--brand-gradient); color: #fff;
  box-shadow: none;
}
.header .title h1 {
  margin: 0; font-size: 20px; font-weight: 800; color: var(--text);
}
.header .title p {
  margin: 2px 0 0; font-size: 13px; color: var(--text-3);
}
.header .toolbar { display: inline-flex; gap: 8px; align-items: center; }
.icon-btn {
  display: inline-grid; place-items: center;
  width: 40px; height: 40px; border-radius: 10px;
  border: 1px solid var(--border);
  background: #ffffff; color: var(--text);
  cursor: pointer;
}
.icon-btn:disabled { opacity: .5; cursor: not-allowed; }
.layout { display: grid; grid-template-columns: 320px 1fr; gap: 12px; align-items: start; }
.sidebar {
  border: 1px solid var(--border);
  border-radius: var(--r-lg);
  background: #ffffff;
  box-shadow: var(--shadow-1);
  padding: 12px;
}
.sidebar.closed { transform: none; opacity: 0; width: 0; padding: 0; border-width: 0; transition: none; }
.sb-header { display: grid; grid-template-columns: 1fr auto auto; gap: 8px; align-items: center; margin-bottom: 8px; }
.search { display: grid; grid-template-columns: 1fr auto; gap: 6px; }
.search input {
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 10px 12px;
  background: #ffffff;
  color: var(--text);
}
.group { margin-bottom: 12px; }
.group-title {
  font-size: 11px; color: var(--text-3);
  font-weight: 800; letter-spacing: .08em; text-transform: uppercase;
  padding: 4px 8px; margin-bottom: 8px;
}
.session-item {
  width: 100%;
  display: grid; gap: 8px;
  text-align: left; cursor: pointer;
  border: 1px solid var(--border);
  border-radius: 12px;
  background: #ffffff;
  padding: 12px;
  transition: border-color .2s ease, box-shadow .2s ease;
}
.session-item:hover {
  border-color: var(--brand);
  box-shadow: var(--shadow-1);
}
.session-item.active {
  border-color: var(--brand);
  box-shadow: var(--shadow-2);
}
.session-item .top { display: grid; grid-template-columns: 1fr auto; align-items: start; gap: 8px; }
.session-item .title {
  font-weight: 800; color: var(--text);
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
  font-size: 14px;
}
.session-item .chip {
  display: inline-block; font-size: 10px;
  background: #fff; border: 1px solid var(--border); color: var(--text-3);
  border-radius: var(--pill); padding: 2px 6px; margin-left: 6px; font-weight: 700;
}
.session-item .meta { display: inline-flex; gap: 10px; color: var(--text-3); font-size: 12px; font-weight: 500; }
.session-item .actions { display: inline-flex; gap: 6px; justify-content: end; }
.icon-btn.mini { width: 30px; height: 30px; border-radius: 8px; }
.chat {
  position: relative; overflow: auto;
  border: 1px solid var(--border);
  border-radius: var(--r-lg);
  background: #ffffff;
  box-shadow: var(--shadow-1);
  padding: 16px;
  max-height: min(72vh, 900px);
}
.chat::-webkit-scrollbar { width: 10px; }
.chat::-webkit-scrollbar-thumb { background: #e8eef6; border-radius: 8px; }
.day-separator { text-align: center; margin: 8px 0; }
.day-separator span {
  display: inline-block; padding: 5px 12px; border-radius: var(--pill);
  background: #ffffff; border: 1px solid var(--border);
  color: var(--text-3); font-size: 11px; font-weight: 700;
}
.message { margin-bottom: 14px; }
.bubble {
  border-radius: var(--bubble-radius);
  padding: 14px 16px;
  background: #ffffff;
  border: 1px solid var(--border);
  box-shadow: none;
  position: relative;
  overflow: hidden;
}
.message.user .bubble { background: #ffffff; border-color: var(--border); }
.message.ia .bubble { background: #ffffff; border-color: var(--border); }

.bubble-head { display: grid; grid-template-columns: auto auto 1fr auto; align-items: center; gap: 6px; margin-bottom: 4px; }
.msg-icon {
  width: 18px; height: 18px; display: grid; place-items: center;
  border-radius: 5px; background: #fff; color: #334155; border: 1px solid var(--border);
  font-size: 12px;
}
.user-avatar {
  width: 32px; height: 32px; border-radius: 50%; overflow: hidden;
  border: 2px solid #3b82f6;
  flex-shrink: 0; display: flex; align-items: center; justify-content: center;
  background: #ffffff;
}
.avatar-img { width: 100%; height: 100%; object-fit: cover; }
.avatar-initials { color: #0f172a; font-weight: 700; font-size: 14px; line-height: 1; }

.who { font-weight: 800; color: var(--text-2); font-size: 12px; }
.spacer { flex: 1 1 auto; }
.when { font-size: 11px; color: var(--text-3); }
.prose { color: var(--text-2); }
.prose :where(p) { margin: 0 0 6px; }
.prose :where(h1,h2,h3) { margin: 8px 0 6px; font-weight: 900; color: var(--text); font-size: 1rem; }
.prose :where(ul,ol) { margin: 6px 0 8px 18px; }
.prose :where(li) { margin: 2px 0; }
.prose a { color: var(--brand); text-decoration: underline; }
.prose code {
  background: #fff; border: 1px solid var(--border);
  padding: 2px 6px; border-radius: 6px;
  font-family: ui-monospace, SFMono-Regular, Menlo, monospace;
}
.bubble-actions { display: flex; align-items: center; gap: 6px; justify-content: flex-end; margin-top: 4px; }
.bubble-actions .copy {
  display: inline-grid; place-items: center; width: 28px; height: 28px;
  border-radius: 8px; border: 1px solid var(--border); background: #ffffff; color: var(--text-3);
}
.typing-animated {
  display: inline-flex; gap: 8px; align-items: center;
  padding: 8px 12px; background: #ffffff;
  border: 1px dashed var(--border); border-radius: var(--pill);
}
.typing-animated .dot { width: 8px; height: 8px; border-radius: 50%; background: #cbd5e1; }
.fab-down {
  width: 44px; height: 44px; border-radius: var(--pill);
  border: 1px solid var(--border); background: #ffffff; box-shadow: var(--shadow-1);
}
.input-container {
  display: grid; grid-template-columns: auto 1fr var(--send-size-w);
  gap: 12px; align-items: center;
  border: 1px solid var(--border); border-radius: var(--r-lg);
  background: #1e7a43; box-shadow: var(--shadow-1); padding: 12px;
}
.input-container input {
  width: 100%; background: #ffffff; border: 1px solid var(--border);
  border-radius: 10px; padding: 14px 16px; color: var(--text); font-size: 15px; outline: none;
}
.input-container input::placeholder { color: var(--text-3); }
.input-container input:disabled { opacity: .6; cursor: not-allowed; }
.send {
  display: inline-grid; place-items: center;
  width: var(--send-size-w); height: var(--send-size-h);
  padding: 0; border-radius: 12px; border: none;
  background: var(--brand-gradient); color: #347fe8;
  box-shadow: var(--shadow-1);
  cursor: pointer;
}
.send svg { width: 20px; height: 20px; display: block; }
.quick-buttons { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-top: 8px; }
.quick-buttons .option {
  padding: 16px; border-radius: 12px;
  background: #ffffff; border: 1px solid var(--border);
  box-shadow: var(--shadow-1); cursor: pointer;
}
.quick-buttons .option h3 { margin: 0 0 4px; font-size: 15px; color: var(--text); }
.quick-buttons .option h3 strong { color: var(--text); }
.quick-buttons .option span { font-size: 12px; color: var(--text-3); }
@media (max-width: 880px) {
  .layout { grid-template-columns: 1fr; }
  .sidebar { order: 2; }
  .chat { order: 1; max-height: 60vh; padding: 12px; }
  .input-container { grid-template-columns: 1fr var(--send-size-w); gap: 8px; padding: 8px; }
  .icon-btn { width: 36px; height: 36px; }
  .msg-icon { width: 14px; height: 14px; font-size: 11px; }
}
@media (prefers-color-scheme: dark) {
  :root {
    --bg: #ffffff;
    --card: #ffffff;
    --card-2: #ffffff;
    --border: #e5e7eb;
    --text: #0f172a;
    --text-2: #1f2937;
    --text-3: #64748b;
  }
  .sidebar, .chat, .session-item, .bubble, .input-container,
  .quick-buttons .option, .header { background: #ffffff; border-color: var(--border); }
}
