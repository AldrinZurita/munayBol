<div class="hoteles-container">
  <h1 class="title">Hoteles en Bolivia</h1>

  <button *ngIf="isSuperAdmin" class="btn btn-secondary agregar-btn" (click)="onAgregarHotel()">
    Agregar Hotel
  </button>

  <!-- Filtros -->
  <section class="filtros-card">
    <h4>Filtros de búsqueda</h4>
    <div class="filtros-grid">
      <div class="filtro">
        <label for="ciudad">Ciudad</label>
        <div class="select">
          <select id="ciudad" [(ngModel)]="ciudadSeleccionada">
            <option value="">Todas las ciudades</option>
            <option *ngFor="let ciudad of ciudades" [value]="ciudad">{{ ciudad }}</option>
          </select>
          <span class="chev"><span class="ms">expand_more</span></span>
        </div>
      </div>
      <div class="filtro">
        <label for="calificacion">Calificación</label>
        <div class="select">
          <select id="calificacion" [(ngModel)]="calificacionSeleccionada">
            <option value="">Todas</option>
            <option *ngFor="let cal of [10,9,8,7,6,5,4,3,2,1,0]" [value]="cal">{{ cal }}</option>
          </select>
          <span class="chev"><span class="ms">expand_more</span></span>
        </div>
      </div>
      <div class="acciones">
        <button class="btn btn-primary" (click)="aplicarFiltros()">Aplicar Filtros</button>
      </div>
    </div>
  </section>

  <!-- Estados -->
  <app-loading *ngIf="cargando"></app-loading>
  <div *ngIf="error" class="estado error">{{ error }}</div>
  <div *ngIf="!cargando && hotelesFiltrados.length === 0 && !error" class="estado">
    No hay hoteles que coincidan con el filtro.
  </div>

  <!-- Lista -->
  <section class="lista">
    <article *ngFor="let hotel of hotelesFiltrados" class="card">
      <div class="card-left">
        <h3 class="hotel-nombre">{{ hotel.nombre }}</h3>
        <!-- Imagen del hotel -->
        <img *ngIf="hotel.url_imagen_hotel"
             [src]="hotel.url_imagen_hotel"
             alt="Imagen de {{ hotel.nombre }}"
             class="hotel-imagen"
             (error)="hotel.url_imagen_hotel = 'assets/no-image.svg'" />
        <ul class="meta">
          <li class="meta-item">
            <span class="ms icon-ms">location_on</span>
            {{ hotel.departamento }}
          </li>
          <li class="meta-item rating">
            <span class="stars">
              <ng-container *ngFor="let s of getStarIcons(hotel.calificacion); let i = index">
                <span class="ms star"
                      [ngClass]="{'full': s==='full', 'half': s==='half', 'empty': s==='empty'}">
                  {{ s === 'full' ? 'star' : (s === 'half' ? 'star_half' : 'star_outline') }}
                </span>
              </ng-container>
            </span>
            <span class="rating-text">{{ formatFiveScale(hotel.calificacion) }}</span>
          </li>
        </ul>
        <p class="descripcion" *ngIf="hotel.ubicacion">{{ hotel.ubicacion }}</p>
        <div class="fecha-admin" *ngIf="isSuperAdmin && hotel.fecha_creacion">
          <span class="label">Fecha de creación:</span> {{ hotel.fecha_creacion | date:'longDate' }}
        </div>
      </div>
      <div class="card-right">
        <button class="btn btn-primary" (click)="onVerDetalles(hotel.id_hotel)">Ver Detalles</button>
        <div class="admin-actions" *ngIf="isSuperAdmin">
          <button class="btn btn-secondary" (click)="onEditarHotel(hotel)">Editar</button>
          <button class="btn btn-danger" (click)="onEliminarHotel(hotel)">Eliminar</button>
        </div>
      </div>
    </article>
  </section>
</div>