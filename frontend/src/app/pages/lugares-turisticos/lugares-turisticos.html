<div class="lugares-container">
  <h1 class="title">Lugares Turísticos de Bolivia</h1>

  <!-- Encabezado para acciones principales, como el botón de agregar -->
  <div class="header-acciones">
    <button *ngIf="isSuperAdmin" class="btn btn-primary" (click)="onAgregarLugar()">
      <span class="material-symbols-outlined icon-ms">add</span>
      Agregar Lugar Turístico
    </button>
  </div>

  <!-- Tarjeta de filtros con el nuevo estilo -->
  <section class="filtros-card">
    <h4>Filtros de búsqueda</h4>
    <div class="filtros-grid solo-uno">
      <!-- Filtro 1: Departamento -->
      <div class="filtro">
        <label for="ciudad">Departamento</label>
        <div class="select-wrapper">
          <select id="ciudad" [(ngModel)]="ciudadSeleccionada">
            <option value="">Todos los departamentos</option>
            <option *ngFor="let ciudad of ciudades" [value]="ciudad">{{ ciudad }}</option>
          </select>
          <div class="chevron-icon">
            <span class="material-symbols-outlined">expand_more</span>
          </div>
        </div>
      </div>
      <!-- Botón de acción para aplicar filtros -->
      <div class="acciones">
        <button class="btn btn-primary" (click)="aplicarFiltros()">Aplicar</button>
      </div>
    </div>
  </section>

  <!-- Sección para mostrar estados (cargando, error, etc.) -->
  <div class="estado">
    <div *ngIf="cargando">Cargando lugares...</div>
    <div *ngIf="error" class="error">{{ error }}</div>
    <div *ngIf="!cargando && lugaresFiltrados.length === 0 && !error">
      No hay lugares que coincidan con el filtro.
    </div>
  </div>

  <!-- Lista de tarjetas de lugares -->
  <section class="lista">
    <article *ngFor="let l of lugaresFiltrados" class="card-lugar">
      <!-- Columna Izquierda: Información del lugar -->
      <div class="card-left">
        <div *ngIf="l.url_image_lugar_turistico" class="imagen-lugar">
          <img [src]="l.url_image_lugar_turistico" [alt]="'Imagen de ' + l.nombre" />
        </div>
        <h3 class="lugar-nombre">{{ l.nombre }}</h3>
        <ul class="meta">
          <li class="meta-item">
            <span class="material-symbols-outlined">location_on</span>
            {{ l.departamento }}
          </li>
          <li class="meta-item" *ngIf="l.tipo">
            <span class="material-symbols-outlined">sell</span>
            {{ l.tipo }}
          </li>
        </ul>
        <p class="descripcion" *ngIf="l.ubicacion">{{ l.ubicacion }}</p>
      </div>

      <!-- Columna Derecha: Botones de acción -->
      <div class="card-right">
        <a class="btn btn-accent" [routerLink]="['/lugares-turisticos', l.id_lugar]">Ver Detalles</a>
        <!-- Botones de administración que solo se muestran si isSuperAdmin es true -->
        <button *ngIf="isSuperAdmin" class="btn btn-secondary" (click)="onEditarLugar(l)">Editar</button>
        <button *ngIf="isSuperAdmin" class="btn btn-danger" (click)="onEliminarLugar(l)">Eliminar</button>
      </div>
    </article>
  </section>
</div>
