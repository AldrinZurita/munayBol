<div class="registro-root" [style.--reg-bg-url]="'url(' + backgroundUrl + ')'">
  <div class="hero" aria-hidden="true"></div>

  <div class="registro-container">
    <!-- Encabezado de marca (coherente con Login) -->
    <div class="brand glass">
      <div class="brand-mark" aria-hidden="true">
        <svg width="28" height="28" viewBox="0 0 24 24" role="img" focusable="false" aria-hidden="true">
          <defs>
            <linearGradient id="rg" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#2563eb"/>
              <stop offset="100%" stop-color="#0ea5b6"/>
            </linearGradient>
          </defs>
          <path fill="url(#rg)" d="M12 2a10 10 0 100 20 10 10 0 000-20Zm1 5a1 1 0 011 1v2h2a1 1 0 110 2h-2v2a1 1 0 11-2 0v-2H9a1 1 0 110-2h2V8a1 1 0 011-1Z"/>
        </svg>
      </div>
      <div class="brand-copy">
        <h1>MunayBol</h1>
        <p>Crea tu cuenta</p>
      </div>
    </div>

    <!-- Tarjeta de registro (glass + borde animado) -->
    <div class="registro-card glass">
      <div class="registro-card__header">
        <h4 class="title">Registrarse</h4>
        <p class="subtitle">Crea tu cuenta para acceder a ofertas exclusivas</p>
      </div>

      <form [formGroup]="form" (ngSubmit)="onSubmit()" class="form">
        <!-- Nombre -->
        <div class="field">
          <label for="nombre">Nombre completo</label>
          <div class="control with-icon">
            <span class="icon" aria-hidden="true">
              <svg width="18" height="18" viewBox="0 0 24 24"><path fill="currentColor" d="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5Zm0 2c-5 0-9 3-9 6v1h18v-1c0-3-4-6-9-6Z"/></svg>
            </span>
            <input id="nombre" type="text" formControlName="nombre" placeholder="Tu nombre" />
          </div>
          <div class="error" *ngIf="(f['nombre'].touched || intentadoEnviar) && f['nombre'].invalid">
            El nombre es obligatorio.
          </div>
        </div>

        <!-- Correo -->
        <div class="field">
          <label for="correo">Correo electrónico</label>
          <div class="control with-icon">
            <span class="icon" aria-hidden="true">
              <svg width="18" height="18" viewBox="0 0 24 24"><path fill="currentColor" d="M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2Zm0 4-8 5L4 8V6l8 5 8-5Z"/></svg>
            </span>
            <input id="correo" type="email" formControlName="correo" placeholder="tu@email.com" />
          </div>
          <div class="error" *ngIf="(f['correo'].touched || intentadoEnviar) && f['correo'].invalid">
            Ingresa un correo válido.
          </div>
        </div>

        <!-- Contraseña -->
        <div class="field">
          <label for="contrasenia">Contraseña</label>
          <div class="control with-icon">
            <span class="icon" aria-hidden="true">
              <svg width="18" height="18" viewBox="0 0 24 24"><path fill="currentColor" d="M12 1a5 5 0 0 0-5 5v3H6a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2h-1V6a5 5 0 0 0-5-5Zm0 2a3 3 0 0 1 3 3v3H9V6a3 3 0 0 1 3-3Z"/></svg>
            </span>
            <input id="contrasenia" [type]="verContrasenia ? 'text' : 'password'" formControlName="contrasenia" placeholder="Mínimo 6 caracteres" />
            <button class="toggle" type="button" (click)="toggleVerContrasenia()" [attr.aria-label]="verContrasenia ? 'Ocultar contraseña' : 'Mostrar contraseña'">
              <svg *ngIf="!verContrasenia" width="18" height="18" viewBox="0 0 24 24"><path fill="currentColor" d="M12 5C5 5 2 12 2 12s3 7 10 7 10-7 10-7-3-7-10-7Zm0 12a5 5 0 1 1 .001-10.001A5 5 0 0 1 12 17Z"/></svg>
              <svg *ngIf="verContrasenia" width="18" height="18" viewBox="0 0 24 24"><path fill="currentColor" d="m2 4 18 18-1.41 1.41-2.26-2.26C15.83 21.08 13.98 21.9 12 22 5 22 2 15 2 15a18.7 18.7 0 0 1 6.08-6.74L1.59 5.41 2 4Z"/></svg>
            </button>
          </div>
          <div class="error" *ngIf="(f['contrasenia'].touched || intentadoEnviar) && f['contrasenia'].invalid">
            La contraseña es obligatoria (mínimo 6 caracteres).
          </div>
        </div>

        <!-- Confirmar contraseña -->
        <div class="field">
          <label for="confirmarContrasenia">Confirmar contraseña</label>
          <div class="control with-icon">
            <span class="icon" aria-hidden="true">
              <svg width="18" height="18" viewBox="0 0 24 24"><path fill="currentColor" d="M12 1a5 5 0 0 0-5 5v3H6a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2h-1V6a5 5 0 0 0-5-5Z"/></svg>
            </span>
            <input id="confirmarContrasenia" [type]="verContrasenia ? 'text' : 'password'" formControlName="confirmarContrasenia" placeholder="Repite tu contraseña" />
          </div>
          <div class="error" *ngIf="(form.hasError('passwordMismatch') && (f['confirmarContrasenia'].touched || intentadoEnviar))">
            Las contraseñas no coinciden.
          </div>
        </div>

        <!-- Pasaporte -->
        <div class="field">
          <label for="pasaporte">Pasaporte</label>
          <div class="control with-icon">
            <span class="icon" aria-hidden="true">
              <svg width="18" height="18" viewBox="0 0 24 24"><path fill="currentColor" d="M17 2H7a2 2 0 0 0-2 2v16l7-3 7 3V4a2 2 0 0 0-2-2Z"/></svg>
            </span>
            <input id="pasaporte" type="text" formControlName="pasaporte" placeholder="N° de pasaporte" />
          </div>
          <div class="error" *ngIf="(f['pasaporte'].touched || intentadoEnviar) && f['pasaporte'].invalid">
            El pasaporte es obligatorio.
          </div>
        </div>

        <!-- Botón enviar -->
        <div class="btn-row">
          <button type="submit" class="submit-btn">
            <span class="btn-content">CREAR CUENTA</span>
          </button>
        </div>

        <!-- Enlace a login -->
        <div class="alt-action">
          ¿Ya tienes cuenta?
          <a class="link-login" routerLink="/login">Iniciar sesión</a>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal Éxito Registro -->
  <div class="modal-backdrop" *ngIf="showRegistroSuccessModal">
    <dialog class="modal-card" open aria-labelledby="registroExitosoTitulo">
      <div class="icon-circle success" aria-hidden="true">✔</div>
      <h2 id="registroExitosoTitulo">¡Registro Exitoso!</h2>
      <p>Bienvenido, {{ successNombre }}. Tu cuenta ha sido creada correctamente.</p>
      <p>Ya puedes iniciar sesión para acceder a tus beneficios exclusivos.</p>
      <button class="btn-modal" (click)="cerrarRegistroSuccess()">Ir al Login</button>
    </dialog>
  </div>
</div>
