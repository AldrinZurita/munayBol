<div class="notification-wrapper" (mouseenter)="onMouseEnter()" (mouseleave)="onMouseLeave()">
  <button type="button" class="notification-bell" aria-label="Ver notificaciones" (click)="toggleNotifications()">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
    <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
  </svg>
  <ng-container *ngIf="(unreadCount$ | async) as count">
    <span class="badge" *ngIf="count > 0">&nbsp;</span>
  </ng-container>
  </button>
  <div class="notification-panel" *ngIf="showNotifications" (mouseenter)="onPanelEnter()" (mouseleave)="onPanelLeave()">
  <div class="panel-header">
    <h3>Notificaciones</h3>
    <button (click)="markAllAsRead()">Marcar todas como leídas</button>
  </div>
  <div class="notification-list">
    <div *ngFor="let notification of (notifications$ | async)" 
         [ngClass]="{'notification-item': true, 'unread': !notification.read}"
         (click)="onNotificationClick(notification)">
      <div style="display: flex; align-items: center; width: 100%;">
        <div class="notification-link" style="flex: 1;">
          <strong>{{ notification.title }}</strong>
          <p>{{ notification.message }}</p>
          <small>{{ notification.createdAt | date:'short' }}</small>
        </div>
        <button class="delete-btn" title="Eliminar notificación" (click)="onDeleteNotification(notification.id); $event.stopPropagation()">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
    </div>
    <div *ngIf="(notifications$ | async)?.length === 0" class="no-notifications">
      No tienes notificaciones.
    </div>
  </div>
  </div>
</div>
